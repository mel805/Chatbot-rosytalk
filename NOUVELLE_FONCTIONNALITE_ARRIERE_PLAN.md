# ğŸ¨ Nouvelle FonctionnalitÃ© : SÃ©lectionner l'Image d'ArriÃ¨re-Plan

## ğŸ“¥ TÃ©lÃ©chargement

**APK avec sÃ©lecteur d'arriÃ¨re-plan** :
```
https://github.com/mel805/Chatbot-rosytalk/releases/download/v1.5.0/RolePlayAI-v1.5.0-signed.apk
```

---

## ğŸ¯ Qu'est-ce qui a Ã©tÃ© ajoutÃ© ?

### Menu de SÃ©lection d'Image

Maintenant, pendant une conversation, vous pouvez **changer l'image d'arriÃ¨re-plan** en choisissant parmi **toutes les images du personnage** !

**Images disponibles** :
- 1 image principale (celle par dÃ©faut)
- 8 images supplÃ©mentaires de la galerie
- **Total : 9 images** Ã  choisir pour chaque personnage

---

## ğŸ“± Comment Utiliser

### Ã‰tape 1 : Ouvrir le SÃ©lecteur

Pendant une conversation, cliquez sur **l'icÃ´ne "Wallpaper" ğŸ–¼ï¸** dans la barre en haut Ã  droite.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Isabella              [ğŸ–¼ï¸]    â”‚ <- Cliquez ici !
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ã‰tape 2 : Choisir l'Image

Un **dialog s'ouvre** avec une grille de **9 images** :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Changer l'arriÃ¨re-plan          â”‚
â”‚ 9 images disponibles            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  [Img 1]     [Img 2]            â”‚
â”‚  Badge       âœ“                  â”‚
â”‚  "Principale" SÃ©lectionnÃ©       â”‚
â”‚                                 â”‚
â”‚  [Img 3]     [Img 4]            â”‚
â”‚                                 â”‚
â”‚  [Img 5]     [Img 6]            â”‚
â”‚                                 â”‚
â”‚  [Img 7]     [Img 8]            â”‚
â”‚                                 â”‚
â”‚  [Img 9]                        â”‚
â”‚                                 â”‚
â”‚             [Fermer]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ã‰tape 3 : Voir le Changement

**InstantanÃ©ment**, l'arriÃ¨re-plan de votre conversation change !

```
Avant:                    AprÃ¨s:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Image 1     â”‚    â†’     â”‚ Image 3     â”‚
â”‚ (Principale)â”‚          â”‚ (Choisie)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ FonctionnalitÃ©s du SÃ©lecteur

### 1. Grille Visuelle

- âœ… **2 colonnes** pour voir plusieurs images Ã  la fois
- âœ… **AperÃ§u clair** de chaque image
- âœ… **DÃ©filement** pour parcourir toutes les 9 images

### 2. Indicateurs Visuels

#### Image Actuellement SÃ©lectionnÃ©e
- âœ… **IcÃ´ne CheckCircle** âœ“ au centre
- âœ… **Fond bleu** semi-transparent
- âœ… **Ã‰lÃ©vation augmentÃ©e** (8dp au lieu de 2dp)

#### Image Principale
- âœ… **Badge "Principale"** en haut Ã  droite
- âœ… Identifie l'image par dÃ©faut du personnage

### 3. Performance

- âœ… **Images optimisÃ©es** : 300px pour le sÃ©lecteur
- âœ… **Crossfade** : Animation douce de 200ms
- âœ… **Chargement rapide** : Cache Coil utilisÃ©
- âœ… **Changement instantanÃ©** : Pas de rechargement

---

## ğŸ¨ Exemples d'Utilisation

### Exemple 1 : Isabella (Vampire)

**Situation** : Vous discutez avec Isabella

**Actions** :
1. Cliquez sur l'icÃ´ne ğŸ–¼ï¸
2. Parcourez ses 9 images :
   - Image principale (portrait gothique)
   - Image 2 (dans son chÃ¢teau)
   - Image 3 (regard sÃ©ducteur)
   - Image 4 (robe victorienne)
   - Etc.
3. Cliquez sur l'image qui vous plaÃ®t
4. L'arriÃ¨re-plan change instantanÃ©ment !

**RÃ©sultat** : Ambiance vampirique personnalisÃ©e selon votre prÃ©fÃ©rence

---

### Exemple 2 : Lyra (GuerriÃ¨re)

**Situation** : Conversation d'aventure avec Lyra

**Actions** :
1. DÃ©marrez avec son image principale (portrait confiant)
2. Pendant la conversation, changez pour :
   - Image en armure complÃ¨te
   - Image en pleine action de combat
   - Image de victoire hÃ©roÃ¯que
3. L'atmosphÃ¨re change selon le moment de l'histoire !

**RÃ©sultat** : Immersion adaptÃ©e au contexte de la conversation

---

### Exemple 3 : Sakura (Anime)

**Situation** : Discussion romantique avec Sakura

**Actions** :
1. Image principale (timide avec sourire)
2. Changez pour des images plus :
   - Romantiques (fleurs de cerisier)
   - Artistiques (en train de dessiner)
   - Douces (rougissante)

**RÃ©sultat** : Ambiance modulÃ©e selon le ton de la conversation

---

## ğŸ” DÃ©tails Techniques

### Structure du Code

```kotlin
// Ã‰tat pour l'image sÃ©lectionnÃ©e
var selectedBackgroundImage by remember { mutableStateOf<String?>(null) }

// Affichage de l'image (sÃ©lectionnÃ©e ou par dÃ©faut)
AsyncImage(
    model = selectedBackgroundImage ?: currentChat.characterImageUrl
)

// Bouton dans TopBar
actions = {
    IconButton(onClick = { showImageSelector = true }) {
        Icon(Icons.Default.Wallpaper, "Changer l'arriÃ¨re-plan")
    }
}

// Dialog avec grille
LazyVerticalGrid(
    columns = GridCells.Fixed(2),
    items(allImages) { imageUrl ->
        // Carte cliquable pour chaque image
    }
)
```

### Optimisations

1. **Images optimisÃ©es** : Taille 300px pour le sÃ©lecteur
2. **Cache** : RÃ©utilisation des images dÃ©jÃ  chargÃ©es
3. **Ã‰tat local** : Changement instantanÃ© sans latence
4. **Animation** : Crossfade 200ms pour fluiditÃ©

---

## ğŸ“Š Comparaison Avant/AprÃ¨s

### Avant cette FonctionnalitÃ©

| Aspect | Ã‰tat |
|--------|------|
| **Choix d'image** | Aucun - image fixe |
| **Personnalisation** | LimitÃ©e |
| **Changement** | Impossible pendant conversation |
| **Images visibles** | 1 seule (principale) |

### AprÃ¨s cette FonctionnalitÃ©

| Aspect | Ã‰tat |
|--------|------|
| **Choix d'image** | âœ… 9 images disponibles |
| **Personnalisation** | âœ… Totale et instantanÃ©e |
| **Changement** | âœ… Ã€ tout moment pendant conversation |
| **Images visibles** | âœ… Toutes (1 + 8) |

---

## ğŸ¯ Cas d'Usage

### 1. Adapter l'AtmosphÃ¨re

**ScÃ©nario** : Conversation qui Ã©volue (amicale â†’ romantique)

**Action** : Changer l'image pour une pose plus appropriÃ©e au contexte

**RÃ©sultat** : Immersion renforcÃ©e

---

### 2. PrÃ©fÃ©rence Personnelle

**ScÃ©nario** : Vous prÃ©fÃ©rez une autre image du personnage

**Action** : Choisir celle qui vous plaÃ®t le plus

**RÃ©sultat** : ExpÃ©rience personnalisÃ©e

---

### 3. DÃ©couvrir les Images

**ScÃ©nario** : Vous voulez voir toutes les images du personnage

**Action** : Ouvrir le sÃ©lecteur et parcourir

**RÃ©sultat** : ApprÃ©ciation visuelle complÃ¨te

---

### 4. Varier l'ExpÃ©rience

**ScÃ©nario** : Multiples conversations avec le mÃªme personnage

**Action** : Changer l'image Ã  chaque nouvelle session

**RÃ©sultat** : ExpÃ©rience renouvelÃ©e

---

## ğŸ¨ Interface du SÃ©lecteur

### Layout

```
Dialog (hauteur 400dp)
  â†“
LazyVerticalGrid (2 colonnes)
  â†“
Cards avec images (aspect ratio 0.75)
  â†“
Indicateurs visuels (CheckCircle + Badge)
```

### Design

- **Cards arrondies** : 12dp radius
- **Espacement** : 12dp entre les images
- **Ã‰lÃ©vation** : 2dp normale, 8dp si sÃ©lectionnÃ©e
- **Couleurs** :
  - Normal : Surface color
  - SÃ©lectionnÃ© : Primary container
  - Badge : Primary color

---

## âœ… Tous les Personnages SupportÃ©s

Les **15 personnages** ont tous **9 images disponibles** :

### Anime (5)
1. **Sakura** - 9 images (styles variÃ©s)
2. **Yuki** - 9 images (Ã©tudiante/casual)
3. **Akane** - 9 images (maternelle/Ã©lÃ©gante)
4. **Hinata** - 9 images (Ã©nergique/joyeuse)
5. **Misaki** - 9 images (sportive/dÃ©contractÃ©e)

### Fantasy (4)
6. **Elara** - 9 images (elfique/mystique)
7. **Isabella** - 9 images (vampire/gothique)
8. **Lyra** - 9 images (guerriÃ¨re/hÃ©roÃ¯que)
9. **Seraphina** - 9 images (angÃ©lique/mÃ©lancolique)

### RÃ©aliste (6)
10. **Marie** - 9 images (sÃ©duisante/mature)
11. **Sophie** - 9 images (professionnelle/Ã©lÃ©gante)
12. **Camille** - 9 images (professeure/stricte)
13. **Emma** - 9 images (douce/nostalgique)
14. **ChloÃ©** - 9 images (espiÃ¨gle/jeune)
15. **ValÃ©rie** - 9 images (patronne/autoritaire)

**Total : 135 images dans l'application !** (15 personnages Ã— 9 images)

---

## ğŸš€ Avantages

### Pour l'Utilisateur

âœ… **ContrÃ´le total** : Choisissez l'image qui vous plaÃ®t
âœ… **Personnalisation** : Adaptez l'ambiance Ã  votre goÃ»t
âœ… **DÃ©couverte** : Voyez toutes les images du personnage
âœ… **FlexibilitÃ©** : Changez Ã  tout moment
âœ… **RapiditÃ©** : SÃ©lection instantanÃ©e

### Pour l'ExpÃ©rience

âœ… **Immersion** : Ambiance personnalisÃ©e
âœ… **VariÃ©tÃ©** : 9 choix par personnage
âœ… **Contexte** : Adaptez selon la conversation
âœ… **Satisfaction** : Votre image prÃ©fÃ©rÃ©e toujours visible

---

## ğŸ“ Guide Rapide

### Comment changer l'arriÃ¨re-plan

```
1. Dans une conversation
   â†“
2. Cliquez sur ğŸ–¼ï¸ (en haut Ã  droite)
   â†“
3. Parcourez les 9 images
   â†“
4. Cliquez sur celle qui vous plaÃ®t
   â†“
5. L'arriÃ¨re-plan change instantanÃ©ment !
```

### Comment revenir Ã  l'image principale

```
1. Ouvrir le sÃ©lecteur ğŸ–¼ï¸
   â†“
2. Cliquer sur l'image avec le badge "Principale"
   â†“
3. L'image par dÃ©faut est restaurÃ©e
```

---

## ğŸ‰ RÃ©sumÃ©

Cette fonctionnalitÃ© ajoute une **personnalisation complÃ¨te** de l'arriÃ¨re-plan des conversations :

âœ… **9 images par personnage** disponibles
âœ… **Changement instantanÃ©** Ã  tout moment
âœ… **Interface intuitive** avec grille visuelle
âœ… **Indicateurs clairs** (sÃ©lection + badge)
âœ… **Performance optimale** (images 300px)
âœ… **135 images au total** dans l'app

**Profitez d'une expÃ©rience encore plus personnalisÃ©e !** ğŸ¨

---

## ğŸ“¥ TÃ©lÃ©chargement

**APK Final avec SÃ©lecteur** :
```
https://github.com/mel805/Chatbot-rosytalk/releases/download/v1.5.0/RolePlayAI-v1.5.0-signed.apk
```

**Version** : 1.5.0 (Final)  
**Date** : 10 dÃ©cembre 2024  
**Nouvelle fonctionnalitÃ©** : âœ… SÃ©lecteur d'arriÃ¨re-plan  
**Images disponibles** : 135 (15 personnages Ã— 9 images)
